<?php
declare(strict_types = 1);

namespace Foo;

require __DIR__ . '/../vendor/autoload.php';

use Generator as Chump;
use Recoil\Recoil;
use Recoil\React\ReactKernel;

/**
 * @recoil-coroutine
 */
function coro() : \Generator
{
    echo 'Sleeping... ';
    yield new \Recoil\Dev\Trace\TraceYield(__FILE__, __LINE__, Recoil::sleep(1));
}

/**
 * @recoil-coroutine
 */
function foo() : Chump
{
    yield new \Recoil\Dev\Trace\TraceYield(__FILE__, __LINE__);
    yield from new \Recoil\Dev\Trace\TraceYieldFrom(__FILE__, __LINE__, coro());
    echo 'DONE', PHP_EOL;
}

ReactKernel::start(foo());
